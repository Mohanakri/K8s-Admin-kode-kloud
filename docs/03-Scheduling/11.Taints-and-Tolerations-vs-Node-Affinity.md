# Taints and Tolerations vs Node Affinity
  - Take me to [Video Tutorial](https://kodekloud.com/topic/taints-and-tolerations-vs-node-affinity/)


Here's a summary of the article "Tying Together Taints, Tolerations, and Node Affinity":

### Objective:
- The article aims to demonstrate a combined approach using taints, tolerations, and node affinity in Kubernetes.
- The goal is to ensure specific pods (`blue`, `red`, `green`) are placed on corresponding nodes (`blue`, `red`, `green`) while preventing unwanted pod-node assignments.

### Approach:
1. **Taints and Tolerations**:
   - Apply taints to nodes (`blue`, `red`, `green`) to mark them with their respective colors.
   - Set tolerations on pods (`blue`, `red`, `green`) to tolerate the taints of their corresponding colors.
   - This ensures that each colored pod is placed on its respective colored node.
   - However, other pods may still end up on these nodes, which is not desired.

2. **Node Affinity**:
   - Label the nodes with their colors (`blue`, `red`, `green`).
   - Set node selectors on pods (`blue`, `red`, `green`) to specify affinity to their respective colored nodes.
   - This ensures that each colored pod is placed on its corresponding colored node.
   - However, it doesn't prevent other pods from being placed on these nodes.

### Combined Solution:
- Use a combination of taints, tolerations, and node affinity for precise pod-node assignments.
- **Taints and Tolerations**:
  - Prevent other pods from being placed on designated nodes (`blue`, `red`, `green`).
- **Node Affinity**:
  - Prevent pods (`blue`, `red`, `green`) from being placed on nodes assigned to other teams.

### Result:
- The combined approach ensures that:
  - Pods `blue`, `red`, `green` are placed on nodes `blue`, `red`, `green`.
  - Prevents other pods from being placed on these specific nodes.
  - Ensures the specified pods are not placed on nodes assigned to other teams.

### Conclusion:
- Taints, tolerations, and node affinity are powerful Kubernetes features for managing pod placement.
- Combining these features allows for fine-grained control over pod-node assignments.
- The example demonstrates how to dedicate nodes for specific pods while preventing undesired pod-node associations.
  
The article concludes by highlighting the importance of combining taints, tolerations, and node affinity to ensure precise pod placement in a shared Kubernetes cluster, achieving the desired assignment of pods to specific nodes while preventing unwanted pod-node relationships.


______________________________________________________________________________________________
In this section, we will take a look at Taints and Tolerations vs Node Affinity
- Taints and Tolerations do not guarantee that the pods will only prefer these nodes; in this case, the red pods may end up on one of the other nodes that do not have a taint or toleration set.
  
  ![tn-na](../../images/tn-na.PNG)
  
 
- As such, a combination of taints and tolerations and node affinity rules can be used together to completely dedicate nodes for specific parts.

  ![tn-nsa](../../images/tn-nsa.png)

  
#### K8s Reference Docs:
- https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
- https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes-using-node-affinity/
